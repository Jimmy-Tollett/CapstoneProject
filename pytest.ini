[tool:pytest]
# Pytest configuration for CAT-21 Parser & Mapping System

# Test discovery patterns
testpaths = tests
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# Minimum version requirements
minversion = 6.0

# Test execution options
addopts = 
    --strict-markers
    --strict-config
    --verbose
    --tb=short
    --cov=app
    --cov=parser
    --cov=orchestrator
    --cov-report=html:htmlcov
    --cov-report=term-missing
    --cov-fail-under=80
    --junitxml=test-results.xml

# Test markers for categorization
markers =
    unit: Unit tests for individual components
    integration: Integration tests across services
    e2e: End-to-end system tests
    health: Health check and monitoring tests
    slow: Tests that take more than 10 seconds
    network: Tests requiring network connectivity
    database: Tests requiring database connectivity
    docker: Tests requiring Docker services
    kubernetes: Tests requiring Kubernetes cluster

# Test environment configuration
env = 
    TESTING = true
    DATABASE_URL = postgresql://test_user:test_pass@localhost:5432/test_flight_data
    API_BASE_URL = http://localhost:8000
    PARSER_UDP_PORT = 8080
    LOG_LEVEL = DEBUG

# Timeout settings
timeout = 300
timeout_method = thread

# Filtering and collection
filterwarnings = 
    ignore::DeprecationWarning
    ignore::PendingDeprecationWarning

# Parallel execution settings
# Uncomment when using pytest-xdist
# addopts = --numprocesses=auto

# Database test settings
# Use separate test database to avoid data pollution